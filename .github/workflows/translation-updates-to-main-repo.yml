name: Push new & updated translations to main branch
# Run on main branch

on:
  push:
    branches:
      - translation-files
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  update-PO:
    name: Generate & push translated files
    runs-on: ubuntu-latest
    steps:
        # checks out your repository and downloads it to the runner, allowing you to run actions against your code
      - uses: actions/checkout@v2
      - run: git fetch --depth=1
      - run: ls -al
      - name: Install mdpo
        run: pip install mdpo
      - name: Set languages
        id: lang-set
        run: |
          languagelist=$(cat _config.yml | grep "languages: \[.*\]" )
          languagelist=${languagelist//'languages: ['}
          languagelist=${languagelist//]}
          languagelist=${languagelist//,}
          echo $languagelist
# Make variable consistent between steps
          echo "languages=$languagelist" >> $GITHUB_ENV
      - name: Print languages
        run: |
          echo ${{ env.languages }}
          languagearray=(en nl de)
          languagearray=(${{ env.languages }})
          for language in "${languagearray[@]}"
          do echo $language
          done
# name: Make General pages
